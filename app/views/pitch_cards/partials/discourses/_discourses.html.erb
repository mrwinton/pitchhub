
<% @discourses.each  do |discourse|

  point = PitchPointsHelper.pitch_points_hash.select { |point|
	discourse.pitch_point_name == point[:name]
  }

  point = point.any? ? point.first : nil

  # Get the initiator content scopes
  ic_scopes = scopes(current_user, :except => ["initiator"])

  # the pitch point must be specified in our pitch_point_hash
  if point == nil
	# TODO better error
	raise Error
  end

%>

	<% if discourse.class.name == "Suggestion" %>
		<%= render partial: 'pitch_cards/partials/discourses/suggestion/pitch_point_suggestion_form', locals: { point: point, suggestion: discourse, ic_scopes: ic_scopes } %>
	<% else %>
		<%= render partial: 'pitch_cards/partials/discourses/comment/pitch_point_comment', locals: { point: point, comment: discourse, ic_scopes: ic_scopes  } %>
	<% end %>


<% end %>

<% if @discourses.any? %>
	<!--paginate @discourses, :remote => true-->
<% end %>